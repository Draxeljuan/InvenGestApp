<div class="sidebar">
  <div class="logo">
    <h2>InvenGest Admin</h2>
  </div>
  <nav class="menu">
    <div class="menu-item" routerLink="/dashboard" routerLinkActive="active">
      <span>游늵 Dashboard</span>
    </div>
    <div class="menu-item" routerLink="/inventario" routerLinkActive="active">
      <span>游닍 Inventario</span>
    </div>
    <div class="menu-item" routerLink="/movimientos-inventario" routerLinkActive="active">
      <span>游댃 Mov. Inventario</span>
    </div>
    <div class="menu-item" routerLink="/reportes" routerLinkActive="active">
      <span>游늵 Reportes</span>
    </div>
    <div class="menu-item" routerLink="/ventas" routerLinkActive="active">
      <span>游눯 Ventas</span>
    </div>
    <div class="menu-item" routerLink="/historial-ventas" routerLinkActive="active">
      <span>游닆 Historial Ventas</span>
    </div>
    <div class="menu-item" routerLink="/buscar-producto" routerLinkActive="active">
      <span>游댌 Buscar Producto</span>
    </div>
    <div class="menu-item" routerLink="/alertas" routerLinkActive="active">
      <span>游댒 Alertas</span>
    </div>
    <div class="menu-item" routerLink="/perfil" routerLinkActive="active">
      <span>游녻 Perfil</span>
    </div>
    <div class="menu-item logout-btn" (click)="logoutService.openModal()">
      <span>游닋 Cerrar sesi칩n</span>
    </div>
  </nav>
</div>

<div class="main-content">
  <div class="header">
    <h1>Dashboard - Vista General</h1>
    <div class="fecha-actual">
      游늰 {{ fechaActual | date:'dd/MM/yyyy' }}
    </div>
  </div>

  <!-- Tarjetas de estad칤sticas principales -->
  <div class="stats-cards">
    <div class="stat-card ventas-card">
      <div class="stat-icon">游눯</div>
      <div class="stat-info">
        <h3>Ventas del D칤a</h3>
        <p class="stat-value">${{ ventasHoy | number:'1.0-0' }}</p>
        <span class="stat-label">Total acumulado</span>
      </div>
    </div>

    <div class="stat-card productos-card">
      <div class="stat-icon">游닍</div>
      <div class="stat-info">
        <h3>Productos Vendidos</h3>
        <p class="stat-value">{{ productosVendidos }}</p>
        <span class="stat-label">Unidades</span>
      </div>
    </div>

    <div class="stat-card movimientos-card">
      <div class="stat-icon">游댃</div>
      <div class="stat-info">
        <h3>Movimientos</h3>
        <p class="stat-value">{{ totalMovimientos }}</p>
        <span class="stat-label">Total del d칤a</span>
      </div>
    </div>

    <div class="stat-card alertas-card">
      <div class="stat-icon">游댒</div>
      <div class="stat-info">
        <h3>Alertas de Stock</h3>
        <p class="stat-value">{{ alertasStock }}</p>
        <span class="stat-label">Requieren atenci칩n</span>
      </div>
    </div>
  </div>

  <!-- Secci칩n de gr치ficos -->
  <div class="dashboard-grid">
    
    <!-- Gr치fico de ventas de la semana -->
    <div class="dashboard-card">
      <div class="card-header">
        <h2>游늳 Ventas de la Semana</h2>
        <span class="card-subtitle">칔ltimos 7 d칤as</span>
      </div>
      <div class="chart-container">
        <div class="bar-chart">
          <div class="bar-item" *ngFor="let venta of ventasSemana">
            <div class="bar-wrapper">
              <div class="bar-fill" 
                   [style.height.%]="calcularPorcentajeBarra(venta.total, getMaxVentaSemana())"
                   [attr.data-value]="venta.total">
                <span class="bar-value">${{ venta.total / 1000 | number:'1.0-1' }}k</span>
              </div>
            </div>
            <span class="bar-label">{{ formatearFecha(venta.fecha) }}</span>
            <span class="bar-sublabel">{{ venta.cantidadVentas }} Unidades</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Top productos m치s vendidos -->
    <div class="dashboard-card">
      <div class="card-header">
        <h2>游끥 Top 5 Productos</h2>
      </div>
      <div class="top-productos">
        <div class="producto-item" *ngFor="let producto of productosTopVentas; let i = index">
          <div class="producto-rank">{{ i + 1 }}</div>
          <div class="producto-info">
            <h4>{{ producto.nombre }}</h4>
            <div class="producto-stats">
              <span class="cantidad">{{ producto.cantidad }} unidades</span>
              <span class="monto">${{ producto.monto | number:'1.0-0' }}</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" 
                   [style.width.%]="calcularPorcentajeBarra(producto.cantidad, 50)">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Movimientos recientes -->
    <div class="dashboard-card movimientos-card-full">
      <div class="card-header">
        <h2>游댃 Movimientos Recientes</h2>
        <span class="card-subtitle">칔ltimos cambios realizados en el inventario</span>
      </div>
      <div class="movimientos-list">
        <div class="movimiento-item" 
             *ngFor="let movimiento of movimientosRecientes"
             [ngClass]="getMovimientoClass(movimiento.tipo)">
          <div class="movimiento-tipo">
            <span class="tipo-badge">{{ movimiento.tipo }}</span>
          </div>
          <div class="movimiento-detalles">
            <h4>{{ movimiento.producto }}</h4>
            <p>Cantidad: {{ movimiento.cantidad }} | {{ movimiento.fecha | date:'dd/MM/yyyy' }}</p>
          </div>
          <div class="movimiento-usuario">
            <span>游녻 {{ movimiento.usuario }}</span>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>